@using TrainingGuides.Web.Features.Membership.Widgets.ResetPassword;
@using TrainingGuides.Web.Features.Shared.Helpers

@model ResetPasswordWidgetViewModel
    
@{
    // Using a new guid ensures no conflict if, for some reason, multiple widgets are on the same page.
    var formDivId = $"resetPasswordForm{Guid.NewGuid()}";
}

@if (Model == null || Model.IsMisconfigured)
{
    <tg-page-builder-content>
        <tg-configure-widget-instructions />
    </tg-page-builder-content>
    
    return;
}

@using (Html.AjaxBeginForm("MemberManagement", "ResetPassword", new AjaxOptions
{
    HttpMethod = "POST",
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = formDivId
}, new { action = $"{Model.BaseUrlWithLanguage}{ApplicationConstants.REQUEST_RESET_PASSWORD_ACTION_PATH}" }))
{
    <div id="@formDivId" class="px-2">
        <partial name="~/Features/Membership/Widgets/ResetPassword/ResetPasswordRequestForm.cshtml" model="Model" />
    </div>
}